{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"User Behavior Insights","text":""},{"location":"#welcome-to-user-behavior-insights","title":"Welcome to User Behavior Insights!","text":"<p>User Behavior Insights, or UBI, is a data standard along with a collection of tools and search engine plugins created to help search engineers gain and utilize an improved understanding of users' actions.</p> <p>For questions or help getting started, reach out to help@ubisearch.dev or join us in the <code>#ubi</code> channel of the Relevance Slack workspace.</p>"},{"location":"#what-ubi-powers","title":"What UBI Powers","text":"<p>Are you or your organization using UBI? Let us know! We'd love to hear about it and tell your success story here.</p>"},{"location":"#ubi-conference-presentations","title":"UBI Conference Presentations","text":"<p>Learn more about UBI through conference presentations. If you have talked about UBI let us know so we can link your talk here, too.</p> <ul> <li> UBI at OpenSearchCon NA 2024 - Watch the presentation</li> <li> UBI at OpenSearchCon EU 2024 - Watch the presentation</li> <li> UBI at Haystack Conference 2024 - Your Search Engine Needs a Memory! (presentation and slides)</li> <li> UBI at MICES 2024 - Watch the presentation and see the slides</li> <li> UBI at Haystack EU 2024 - Leveraging User Behavior Insights to Enhance Search Relevance (presentation and slides)</li> </ul> <p>There are a number of talks related to the topic of search quality and building tools that are fueled by UBI data as well.</p> <ul> <li> Breaking Search for Fun and Profit at Berlin Buzzwords 2025 - Watch the presentation</li> <li> Streamlining Search Quality: Search Relevance Workbench at Berlin Buzzwords 2025 - Watch the presentation</li> </ul>"},{"location":"#help-getting-started","title":"Help Getting Started","text":"<p>For questions or help getting started, reach out to help@ubisearch.dev or join us in the <code>#user-behavior-insights</code> channel of the Relevance Slack workspace and we will be glad to help!</p>"},{"location":"#purpose-and-goals","title":"Purpose and Goals","text":"<p>Many Search teams struggle with understanding \"Why is my user doing this\". They have great understanding of an incoming query and the results returned, but no ability to connect that information with an indicator of success, such as a click through event or add to cart event.</p> <p>There are many tools out there for tracking web events, e.g. Google Analytics, but each is a bit different, and each tends to focus on the general case rather than the specific needs of search teams. </p> <p>The User Behavior Insights standard attempts to provide a search focused standard that can operate across many platforms. We currently have plugins for OpenSearch, Elasticsearch and Solr, but we hope that many other search platforms adopt UBI - get in touch  if you'd like to help.  </p> <p>Once you have this tracking data, you can potentially use it to:</p> <ul> <li>Develop a deeper understanding of what your users are doing.</li> <li>Create search relevance metrics.</li> <li>Tune search parameters automatically. </li> <li>Balance between different approaches to search (e.g. lexical and/or semantic).</li> </ul>"},{"location":"#reference-implementation","title":"Reference Implementation","text":"<p>A full reference implementation, showing UBI tracking search events on an e-commerce website, using OpenSearch is available at chorus-opensearch-edition. Check out the Quick Start for details on getting up and running with an example environment.</p>"},{"location":"#sponsored-led-by","title":"Sponsored &amp; Led By","text":"Person Affiliation Contact Eric Pugh OpenSource Connections epugh@opensourceconnections.com Jeff Zemerick Mountain Fog jeff.zemerick@mtnfog.com Stavros Macrakis Amazon OpenSearch macrakis@amazon.com Charlie Hull The Search Juggler charlie@thesearchjuggler.com"},{"location":"datasets/","title":"Datasets","text":"<p>This page lists datasets and data generation utilities for use with UBI.</p> <p>When working to integrate with UBI it can be helpful to have data in the UBI format to design and develop against.</p> <p>Refer to the Samples for JSON files illustrating events and queries in the UBI format.</p>"},{"location":"datasets/#ubi-data-generator","title":"UBI Data Generator","text":"<p>The UBI Data Generator generates UBI data from the Amazon ESCI dataset. The generated UBI data can be exported as CSV and imported into a search engine index.</p>"},{"location":"datasets/#ubi-chorus-data-generator","title":"UBI Chorus Data Generator","text":"<p>The UBI Chorus Data Generator creates fake, random UBI data and indexes it into OpenSearch. The randomly generated data is useful for development and debugging of UBI tools and plugins.</p>"},{"location":"get_involved/","title":"Get Involved","text":"<p>Everything about UBI is open source! The standard, plugins, tools, and data sets are all open source.</p> <p>We welcome your contributions no matter how small they may be!</p> <p>To contribute, you can look at the GitHub Issues in each of the following repositories. You can also reach out for help getting started.</p>"},{"location":"get_involved/#ubi-repositories","title":"UBI Repositories","text":"<ul> <li> UBI Standard</li> <li> OpenSearch UBI Plugin</li> <li> Elasticsearch UBI Plugin</li> </ul>"},{"location":"help/","title":"Help","text":"<p>For questions or help getting started, reach out to help@ubisearch.dev and we will be glad to help!</p> <p>You can also get in touch in the <code>#ubi</code> channel of the Relevance Slack workspace.</p>"},{"location":"news/","title":"UBI News","text":""},{"location":"news/#ubi-released-in-opensearch-31-june-24-2025","title":"UBI released in OpenSearch 3.1 - June 24, 2025","text":"<p>OpenSearch 3.1 releases with <code>opensearch-ubi</code> plugin included and new Search Relevance Workbench that delivers implicit judgments using UBI data.</p>"},{"location":"news/#amazon-opensearch-ingestion-blueprint-january-27-2025","title":"Amazon OpenSearch Ingestion blueprint - January 27, 2025","text":"<p>A blueprint yaml is now available for creating an Amazon OpenSearch Ingestion pipeline to facilitate persisting of UBI queries and events.</p>"},{"location":"news/#opensearch-21801-ubi-plugin-november-19-2024","title":"OpenSearch 2.18.0.1 UBI Plugin - November 19, 2024","text":"<ul> <li>Adding an API endpoint to initialize the plugin and create the UBI indexes</li> <li>Add query_id to the events mapping</li> <li>Change user_query to be a keyword</li> </ul>"},{"location":"news/#opensearch-21800-ubi-plugin-november-15-2024","title":"OpenSearch 2.18.0.0 UBI Plugin - November 15, 2024","text":"<ul> <li>Capturing application in the events</li> <li>Changing the timestamp to strict_date_time for consistency</li> <li>Handling msearch requests</li> </ul>"},{"location":"news/#ubi-120-announced-october-25-2024","title":"UBI 1.2.0 Announced - October 25, 2024","text":"<p>This release introduces a formal application element to both queries and events so you can distingus different sources of queries and their follow on events. Think type-ahead and search as two common applications.  We also formalize that the timestamps are ISO 8601 formatted. </p> <p>Learn more about the changes in version 1.2 of the UBI standard at https://github.com/o19s/ubi/releases/tag/v1.2.0.</p>"},{"location":"news/#initial-ubi-plugin-for-elasticsearch-october-9-2024","title":"Initial UBI Plugin for Elasticsearch - October 9, 2024","text":"<p>The initial code for a UBI plugin for Elasticsearch is now available.</p>"},{"location":"news/#opensearch-2171-ubi-plugin-october-4-2024","title":"OpenSearch 2.17.1 UBI Plugin - October 4, 2024","text":"<p>The UBI plugin for OpenSearch 2.17.1 is now available.</p> <p>See what's new and download it at https://github.com/opensearch-project/user-behavior-insights/releases/tag/2.17.1.0.</p>"},{"location":"news/#ubi-110-announced-august-31-2024","title":"UBI 1.1.0 Announced - August 31, 2024","text":"<p>First release with third party users looking to leverage UBI. This release is primarily adding things we initially decided to skip, and being more relaxed in our requirements for validation.</p> <p>Learn more about the changes in version 1.1.0 of the UBI standard at https://github.com/o19s/ubi/releases/tag/v1.1.0.</p>"},{"location":"news/#opensearch-2160-ubi-plugin-august-20-2024","title":"OpenSearch 2.16.0 UBI Plugin - August 20, 2024","text":"<p>The UBI plugin for OpenSearch 2.16.0 is now available.</p> <p>See what's new and download it at https://github.com/opensearch-project/user-behavior-insights/releases/tag/2.16.0.0.</p>"},{"location":"news/#opensearch-2150-ubi-plugin-june-27-2024","title":"OpenSearch 2.15.0 UBI Plugin - June 27, 2024","text":"<p>The UBI plugin for OpenSearch 2.15.0 is now available.</p> <p>See what's new and download it at https://github.com/opensearch-project/user-behavior-insights/releases/tag/2.15.0.0.</p>"},{"location":"news/#ubi-100-announced-june-14-2024","title":"UBI 1.0.0 Announced - June 14, 2024","text":"<p>This is the first release of the User Behavior Insights specification that supports tracking of user queries and subsequent actions. Using this schema allows you to validate that your query data and event data are UBI compliant.</p> <p>Learn more about the changes in version 1.0.0 of the UBI standard at https://github.com/o19s/ubi/releases/tag/v1.0.0.</p>"},{"location":"quickstart/","title":"Quick Start","text":"<p>The Chorus project provides a UBI reference implementation that you can use to build on or model your search stack. Chorus uses OpenSearch, but the instructions generally apply also to Elasticsearch.</p> <p>First, clone the Chorus repository.</p> <pre><code>git clone https://github.com/o19s/chorus-opensearch-edition.git\n</code></pre> <p>Next, the quickstart script will launch OpenSearch, download and index the sample product data for the <code>ecommerce</code> index:</p> <pre><code>./quickstart.sh\n</code></pre> <p>TODO: Insert some steps here.</p> <p>When finished, you can clean up the Docker resources:</p> <pre><code>docker compose down -v\n</code></pre>"},{"location":"standard/","title":"The User Behavior Insights (UBI) Standard","text":"<p>The most important part of UBI is its standard that defines how queries and user events are defined. The UBI standard is maintained on GitHub.</p> <p>UBI requires coordination between the client (a browser, a mobile app, etc.) and the backend, which is documented using UBI standard</p> <p>The schema is documented by itself, but it's much easier to get \"the big picture\" with a graphical representation:</p> <p></p> <p>The UBI standard is available under the Apache Software License, version 2. </p>"},{"location":"tools/","title":"UBI Tools and Plugins","text":"<p>There are several tools and plugins available to support UBI data capture and analysis.</p> <ul> <li> Amazon OpenSearch Ingestion blueprint for creating Amazon OpenSearch Ingestion pipeline to support persisting UBI events and queries.</li> <li> OpenSearch UBI plugin for facilitating the capture of UBI queries and events in OpenSearch.</li> <li> OpenSearch Search Relevance Workbench leverages UBI for implicit judgments.</li> <li> Kata 7: Team Draft Interleaving A/B Tests teaches you to use UBI data to power your A/B tests using Team Draft Interleaving.</li> <li> Elasticsearch UBI Plugin for facilitating the capture of UBI queries and events in Elasticsearch.</li> <li> Apache Solr implementation for facilitating the capture of UBI queries and events in Apache Solr.</li> </ul>"},{"location":"tools/#amazon-opensearch-ingestion-blueprint","title":"Amazon OpenSearch Ingestion Blueprint","text":"<p>The Amazon OpenSearch Ingestion UBI blueprint is a pre-defined configuration that allows for creating an OpenSearch Ingestion pipeline that ingests UBI queries and events.</p> <ul> <li>The AWS OpenSearch Ingestion blueprint yaml</li> <li>Terraform scripts for creating the full Amazon OpenSearch Ingestion pipeline</li> </ul> <p>The blueprint creates a pipeline that facilitates receiving and storing UBI queries and events. The blueprint creates:</p> <ul> <li>An S3 sink for UBI queries and events.</li> <li>An OpenSearch sink for UBI queries and events.</li> </ul> <p>UBI queries and events that are received via an HTTP source are routed to one of the above sinks based on the value of the <code>type</code> value in the received JSON. For example, the script below sends a UBI <code>event</code> to the pipeline:</p>"},{"location":"tools/#sending-queries-and-events-to-the-pipeline","title":"Sending Queries and Events to the Pipeline","text":"<p>The example commands below uses <code>awscurl</code> from the awscurl open source project.</p> <p>The following command illustrates how to send a UBI <code>event</code> to the pipeline:</p> <pre><code>awscurl \\\n    --service osis \\\n    --region ${AWS_REGION} \\\n    --profile ${AWS_PROFILE} \\\n    -X POST \\\n    -H \"Content-Type: application/json\" \\\n    -d '[{\"type\": \"event\", \"action_name\": \"click\", \"query_id\": \"99999999-4455-6677-8899-aabbccddeeff\", \"event_attributes\": {\"position\": {\"ordinal\": 1}, \"object\": {\"object_id\": \"1234\", \"object_id_field\": \"ean\", \"user_id\": \"abc\"}}}]' \\\n    https://${OSIS_PIPELINE_ENDPOINT_URL}/ubi\n</code></pre> <p>And the similar command below sends a UBI <code>query</code> to the pipeline:</p> <pre><code>awscurl \\\n    --service osis \\\n    --region ${AWS_REGION} \\\n    --profile ${AWS_PROFILE} \\\n    -X POST \\\n    -H \"Content-Type: application/json\" \\\n    -d '[{\"type\": \"query\", \"user_query\": \"computer\", \"query_id\": \"00112233-4455-6677-8899-aabbccddeeff\"}]' \\\n    https://${OSIS_PIPELINE_ENDPOINT_URL}/ubi\n</code></pre> <p>Note the <code>type</code> property in the body of each request. The <code>type</code> property is used by the pipeline to route the request to either a query or event sink.</p> <p>After this query and event are sent, they will be delivered to the appropriate sink and viewable in the Amazon S3 bucket and in the Amazon OpenSearch index.</p>"},{"location":"tools/#viewing-the-ubi-events-and-queries","title":"Viewing the UBI Events and Queries","text":"<p>Once UBI queries and events are sent to the pipeline and received, the pipeline will store the queries and events in an S3 bucket and in an OpenSearch index. The example command below illustrates how to search the <code>ubi_events</code> index to view the indexed UBI events.</p> <pre><code>awscurl \\\n    \"https://${OPENSEARCH_ENDPOINT}/ubi_events/_search\" \\\n    -X GET \\\n    --region ${AWS_REGION} \\\n    --service es \\\n    --profile ${AWS_PROFILE}\n</code></pre> <p>Indexed queries can be viewed by changing the <code>ubi_events</code> index to the <code>ubi_queries</code> index.</p>"},{"location":"tools/#ubi-plugin-for-opensearch","title":"UBI Plugin for OpenSearch","text":"<p>The OpenSearch UBI plugin facilitates persisting client-side events (e.g. item clicks, scroll depth) and OpenSearch queries for the purpose of analyzing the data to improve search relevance and user experience. The concepts of UBI and this plugin project was originally proposed in the OpenSearch UBI RFC.</p> <p>Note that the UBI plugin is not required to use UBI. You can use any method of persisting queries and events into OpenSearch. The UBI JavaScript Collector is an example.</p> <p>To use the plugin, first download the release appropriate for your version of OpenSearch. Next, install the plugin, substituting the version you downloaded with the <code>2.14.0</code> in the command below.</p> <pre><code>bin/opensearch-plugin install file:/opensearch-ubi-1.0.0-os2.14.0.zip\n</code></pre> <p>With the plugin installed, you can now capture OpenSearch queries:</p> <pre><code>curl -s http://localhost:9200/ecommerce/_search -H \"Content-Type: application/json\" -d'\n {\n  \"ext\": {\n   \"ubi\": {\n    }\n   },\n   \"query\": {\n     \"match\": {\n       \"name\": \"toner\"\n     }\n   }\n }'\n</code></pre> <p>And you can send client-side events to OpenSearch:</p> <pre><code>curl -s http://localhost:9200/ecommerce/_search -H \"Content-Type: application/json\" -d'\n {\n  \"ext\": {\n   \"ubi\": {\n    }\n   },\n   \"query\": {\n     \"match\": {\n       \"name\": \"toner\"\n     }\n   }\n }'\n</code></pre> <p>To see these events, check the <code>ubi_queries</code> and <code>ubi_events</code> indexes:</p> <pre><code>curl http://localhost:9200/ubi_queries/_search\ncurl http://localhost:9200/ubi_events/_search\n</code></pre>"},{"location":"tools/#ubi-plugin-for-elasticsearch","title":"UBI Plugin for Elasticsearch","text":"<p>The Elasticsearch UBI Plugin is a fork of the OpenSearch UBI plugin. This plugin provides similar core functionality but other functionality will differ.</p> <p>Note that the UBI plugin is not required to use UBI. You can use any method of persisting queries and events into Elasticsearch. The UBI JavaScript Collector is an example.</p> <p>To use the plugin, first download the release appropriate for your version of Elasticsearch. Next, install the plugin:</p> <pre><code>bin/elasticsearch-plugin install file:/elasticsearch-ubi-1.0.0-es2.14.0.zip\n</code></pre> <p>With the plugin installed, you can now capture OpenSearch queries:</p> <pre><code>curl -s http://localhost:9200/ecommerce/_search -H \"Content-Type: application/json\" -d'\n {\n  \"ext\": {\n   \"ubi\": {\n    }\n   },\n   \"query\": {\n     \"match\": {\n       \"name\": \"toner\"\n     }\n   }\n }'\n</code></pre> <p>And you can send client-side events to OpenSearch:</p> <pre><code>curl -s http://localhost:9200/ecommerce/_search -H \"Content-Type: application/json\" -d'\n {\n  \"ext\": {\n   \"ubi\": {\n    }\n   },\n   \"query\": {\n     \"match\": {\n       \"name\": \"toner\"\n     }\n   }\n }'\n</code></pre> <p>To see these events, check the <code>ubi_queries</code> and <code>ubi_events</code> indexes:</p> <pre><code>curl http://localhost:9200/ubi_queries/_search\ncurl http://localhost:9200/ubi_events/_search\n</code></pre>"},{"location":"tools/#ubi-plugin-for-solr","title":"UBI Plugin for Solr","text":"<p>The Solr UBI Plugin is a fork of the OpenSearch UBI plugin. This plugin provides similar core functionality but other functionality will differ.</p>"}]}